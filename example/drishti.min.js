var drishti={elmVar:{elm:"",elmRef:""},isElmNull:!1,setChildParentFlag:!1,actualValue:"",expectedValue:"",expectedValueofRef:"",errorTable:[],notExecutedTable:[],init:function(){drishti.passes=0,drishti.failures=0,drishti.notExecuted=0,drishti.duration=0,drishti.assertsDone=0;for(var e in drishti.errorTable){var t=drishti.errorTable[e].Element;document.querySelector(t).style.outline="",drishti.errorTable.splice(e,1)}},assert:function(e,t){return drishti.assertsDone+=1,e!==t?drishti.error():drishti.pass()},iterate:function(e){"object"!=typeof mainObj&&(mainObj=e),"string"!=typeof parentObj&&(parentObj=""),"string"!=typeof conditionValue&&(conditionValue="");for(var t in e)if(e.hasOwnProperty(t)){if("object"==typeof e[t]){if("selector"in e[t]&&(drishti.elm1=e[t].selector,drishti.elmVar.elm=document.querySelector(""+drishti.elm1),drishti.elmName=t),drishti.isElmNull=drishti.isAbsent(drishti.elmVar.elm),console.groupCollapsed(t),conditionValue+=t+" : ",refObj=Object.keys(e[t])[0],parentObj=t,refObj in mainObj&&(drishti.elmVar.elmRef=document.querySelector(""+mainObj[refObj].selector)),"child"===parentObj&&(childObj=Object.keys(e[t]),drishti.setChildParentFlag=!1),"object"==typeof childObj){var i=childObj.indexOf(t);-1!==i&&(refObj=childObj[i],drishti.isElmNull||drishti.methods.child())}myMethods=drishti.methods[t],void 0===myMethods||drishti.isElmNull||"child"===parentObj||(drishti.actualValue=myMethods()),drishti.iterate(e[t])}else if(drishti.expectedValue=e[t],printValue=drishti.expectedValue,"selector"!==t){if(conditionValue+=t+" : "+drishti.expectedValue,/(\d+)%$/.test(drishti.expectedValue)){var r=100/parseInt(RegExp.$1);drishti.expectedValue=drishti.expectedValueofRef/r,printValue=JSON.stringify(printValue)}else/^([\+\-])(\d+)/.test(drishti.expectedValue)&&(drishti.expectedValue=drishti.expectedValueofRef+parseInt(RegExp.$_),printValue=JSON.stringify(printValue));drishti.isElmNull&&"absent"!==t?(drishti.actualValue=null,console.log("%c "+t+" : "+printValue+"  		Element not present, no test executed","color:orange"),drishti.notRun()):(myMethods=drishti.methods[t],void 0!==myMethods&&(drishti.actualValue=myMethods())),null!==drishti.actualValue&&("aligned"!==parentObj&&"cssContains"!==parentObj||-1===drishti.actualValue.indexOf(drishti.expectedValue)||(drishti.actualValue=drishti.expectedValue),assertStatus=drishti.assert(drishti.actualValue,drishti.expectedValue),assertStatus?console.log("%c "+t+" : "+printValue,"color:green;"):console.log("%c "+t+" : "+printValue+"  		{Expected = "+drishti.expectedValue+", Actual = "+drishti.actualValue+"}","color:red;",""))}conditionValue=""}console.groupEnd()},showError:function(){console.table(drishti.errorTable)},showNotExecuted:function(){console.table(drishti.notExecutedTable)},pass:function(){return drishti.passes+=1,!0},error:function(){return drishti.isElmNull||(drishti.elmVar.elm.style.outline="#f00 solid 5px"),Array.isArray(drishti.actualValue)&&(drishti.actualValue=JSON.stringify(drishti.actualValue)),drishti.errorTable.push({Element:drishti.elm1,ElementName:drishti.elmName,Condition:conditionValue,Actual:drishti.actualValue,Expected:drishti.expectedValue}),drishti.failures+=1,!1},notRun:function(){return drishti.notExecutedTable.push({Element:drishti.elm1,ElementName:drishti.elmName,Condition:conditionValue,Actual:drishti.actualValue,Expected:drishti.expectedValue}),drishti.notExecuted+=1,null},getComputedStyle:function(e,t){var i={};return i="undefined"!=typeof e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null)[t]},isVisible:function(e){return e.offsetWidth>0||e.offsetHeight>0?!0:!1},isAbsent:function(e){return null===e?!0:!1},run:function(){if("undefined"==typeof drishtiSpec)return console.error("drishtiSpec is not defined. Make sure you have visualSpec folder and visualSpec file"),null;var e=new Date;console.clear(),drishti.init(),console.log("%cDrishti%c%c Visual Testing","color:blue;font-size : 25px",'background: url("./drishti/images/drishti-eye-blue-sm.png");padding-right:100px;font-size:20px; text-align: center',""),console.groupCollapsed("Drishti testing suite result"),drishti.iterate(drishtiSpec),console.groupEnd();var t=new Date;duration=t-e,drishti.result()},result:function(){drishti.notExecuted<1?console.log("%cpasses: %c"+drishti.passes+" , %cfailures: %c"+drishti.failures+" %c, duration: %c"+duration+"ms","color:green;font-size:16px","color:green;font-style:italic;font-size:18px","color:red;font-size:16px","color:red;font-style:italic;font-size:18px","font-size:16px","font-style:italic;font-size:18px"):console.log("%cpasses: %c"+drishti.passes+" , %cfailures: %c"+drishti.failures+" , %cnot executed: %c"+drishti.notExecuted+" %c, duration: %c"+duration+"ms","color:green; font-size : 16px","color:green; font-style:italic; font-size : 18px","color:red; font-size : 16px","color: red; font-style: italic;font-size : 18px","color:orange; font-size : 16px","color: orange; font-style: italic;font-size : 18px","font-size : 16px","font-style: italic;font-size : 18px"),drishti.failures>0&&(console.groupCollapsed("%cdrishti: Error Table","color:grey; font-size:10;"),drishti.showError(),console.groupEnd())},methods:{above:function(){return drishti.elmVar.elmRef.offsetTop-(drishti.elmVar.elm.offsetTop+drishti.elmVar.elm.offsetHeight)},below:function(){return drishti.elmVar.elm.offsetTop-(drishti.elmVar.elmRef.offsetTop+drishti.elmVar.elmRef.offsetHeight)},leftOf:function(){return drishti.elmVar.elmRef.offsetLeft-(drishti.elmVar.elm.offsetLeft+drishti.elmVar.elm.offsetWidth)},rightOf:function(){return drishti.elmVar.elm.offsetLeft-(drishti.elmVar.elmRef.offsetLeft+drishti.elmVar.elmRef.offsetWidth)},childItems:function(){return drishti.elmVar.elm.querySelectorAll(""+refObj).length},widthAs:function(){return drishti.expectedValueofRef=drishti.elmVar.elmRef.offsetWidth,drishti.elmVar.elm.offsetWidth},heightAs:function(){return drishti.expectedValueofRef=drishti.elmVar.elmRef.offsetHeight,drishti.elmVar.elm.offsetHeight},width:function(){return drishti.elmVar.elm.offsetWidth},height:function(){return drishti.elmVar.elm.offsetHeight},absent:function(){return drishti.isAbsent(drishti.elmVar.elm)},visible:function(){return drishti.isVisible(drishti.elmVar.elm)},top:function(){return drishti.elmVar.elm.offsetTop-drishti.elmVar.elmRef.offsetTop},right:function(){return drishti.elmVar.elmRef.offsetLeft+drishti.elmVar.elmRef.offsetWidth-(drishti.elmVar.elm.offsetLeft+drishti.elmVar.elm.offsetWidth)},bottom:function(){return drishti.elmVar.elmRef.offsetTop+drishti.elmVar.elmRef.offsetHeight-(drishti.elmVar.elm.offsetTop+drishti.elmVar.elm.offsetHeight)},left:function(){return drishti.elmVar.elm.offsetLeft-drishti.elmVar.elmRef.offsetLeft},childList:function(){return drishti.elmVar.elm.querySelectorAll("li").length},textIs:function(){return drishti.elmVar.elm.textContent},textContains:function(){var e=drishti.elmVar.elm.textContent;return-1!==e.indexOf(drishti.expectedValue)?drishti.expectedValue:e},aligned:function(){var e=[];return elmRefTop=drishti.elmVar.elmRef.offsetTop,elmTop=drishti.elmVar.elm.offsetTop,elmRefLeft=drishti.elmVar.elmRef.offsetLeft,elmLeft=drishti.elmVar.elm.offsetLeft,elmRefTop===elmTop&&e.push("Top"),elmRefLeft===elmLeft&&e.push("Left"),elmRefTop+drishti.elmVar.elmRef.offsetHeight===elmTop+drishti.elmVar.elm.offsetHeight&&e.push("Bottom"),elmRefLeft+drishti.elmVar.elmRef.offsetWidth===elmLeft+drishti.elmVar.elm.offsetWidth&&e.push("Right"),e},attribute:function(){var e=drishti.elmVar.elm.attributes[refObj];return void 0!==e?e.value:void 0},cssContains:function(){return drishti.getComputedStyle(drishti.elmVar.elm,refObj)},click:function(){return drishti.expectedValue&&drishti.elmVar.elm.click(),null},enterText:function(){return drishti.elmVar.elm.value="",null},child:function(){return drishti.setChildParentFlag||(parentElm=drishti.elmVar.elm,drishti.setChildParentFlag=!0),drishti.elmVar.elm=parentElm.querySelector(""+refObj),null},showInViewport:function(){return drishti.expectedValue&&drishti.elmVar.elm.scrollIntoView(),null},inViewport:function(){var e=drishti.elmVar.elm.getBoundingClientRect().top,t=drishti.elmVar.elm.getBoundingClientRect().bottom;return e>=0&&t<=window.innerHeight},scroll:function(){},pageDown:function(){return window.scrollBy(0,window.innerHeight),null},pageUp:function(){"windowActions"===parentObj&&window.scrollBy(0,-window.innerHeight)}}};window.jQuery?$(document).ready(function(){drishti.run()}):document.onload=drishti.run();
