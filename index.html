<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Drishti by rupeshmore</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Drishti</h1>
        <h2>Drishti is a visual testing tool. It runs within the browser and publishes the report in browser console. Support all browsers and mobile devices.</h2>
        <a href="https://github.com/rupeshmore/drishti" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="drishti" class="anchor" href="#drishti" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drishti</h1>

<p>Drishti is a visual testing tool. It runs directly in the browser and publishes the report in the browser console. (cool yeah)</p>

<p><img src="http://media.yogajournal.com/wp-content/uploads/Drishti.png" width="480"></p>

<h2>
<a id="why-drishti" class="anchor" href="#why-drishti" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why Drishti?</h2>

<p>Visual regression testing involves lots of efforts using manual testing. Traditionally it is done using eyeballing.
Automated tools like webdriver can be used, but requires additional programming to drive this.</p>

<h2>
<a id="how-drishti-works" class="anchor" href="#how-drishti-works" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How Drishti Works?</h2>

<p>drishti.js runs the test against the drishtiSpec defined in visualSpec folder.</p>

<p>Multiple test specs can be defined in the different visualSpec file and can be loaded as defined in config.json.</p>

<p>Directory structure:</p>

<pre><code>├── js/
│   ├── lib
│   │   ├── drishti.js
│   ├── visualSpec
│   │   ├── home.js
│   │   ├── mobile.js
</code></pre>

<h2>
<a id="drishti-reports" class="anchor" href="#drishti-reports" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drishti Reports</h2>

<h3>
<a id="drishti-publishes-test-results-in-the-browser-console" class="anchor" href="#drishti-publishes-test-results-in-the-browser-console" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drishti publishes test results in the browser console.</h3>

<p><img src="https://raw.githubusercontent.com/rupeshmore/drishti/master/img/passed.jpg" width="720"></p>

<h4>
<a id="failed-tests" class="anchor" href="#failed-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Failed tests</h4>

<pre><code>Failed tests are highlighted in the browser with a red box and
an error table is displayed in the console for detail report.
</code></pre>

<p><img src="https://raw.githubusercontent.com/rupeshmore/drishti/master/img/failed.jpg" width="720"></p>

<p>In the above screenshot, the test is checking for:</p>

<ol>
<li>link test checks for text suff2.co.nz link in stuff logo and found stuff.co.nz</li>
<li>weather widget test checks for Auckland city and found Wellington.</li>
</ol>

<h4>
<a id="skipped-tests" class="anchor" href="#skipped-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Skipped tests</h4>

<pre><code>Elements that are not found on the page are skipped.
</code></pre>

<p><img src="https://raw.githubusercontent.com/rupeshmore/drishti/master/img/skipped.jpg" width="720"></p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a id="pre-requisite" class="anchor" href="#pre-requisite" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pre-requisite</h3>

<p>Nodejs installed on machine.</p>

<p>Download the Drishti content using zip or using  git <code>git checkout https://github.com/rupeshmore/drishti.git</code></p>

<p>Go to Drishti directory
run <code>npm install</code>.
This will download all the nodejs dependencies.</p>

<h2>
<a id="drishti-server-and-visual-spec-configuration" class="anchor" href="#drishti-server-and-visual-spec-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drishti Server and visual Spec Configuration</h2>

<p>edit the config.json file specify URL to test and spec rules.</p>

<div class="highlight highlight-source-js"><pre>{
 <span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>http://www.stuff.co.nz/<span class="pl-pds">"</span></span>,
 <span class="pl-s"><span class="pl-pds">"</span>browser<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>google chrome<span class="pl-pds">"</span></span>,
 <span class="pl-s"><span class="pl-pds">"</span>report<span class="pl-pds">"</span></span><span class="pl-k">:</span>[<span class="pl-s"><span class="pl-pds">"</span>cli<span class="pl-pds">"</span></span>],
 <span class="pl-s"><span class="pl-pds">"</span>drishtiSpecRules<span class="pl-pds">"</span></span><span class="pl-k">:</span>[
  {
     <span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>iphone.js<span class="pl-pds">"</span></span>,
     <span class="pl-s"><span class="pl-pds">"</span>condition<span class="pl-pds">"</span></span><span class="pl-k">:</span>{
      <span class="pl-s"><span class="pl-pds">"</span>cssSelector<span class="pl-pds">"</span></span><span class="pl-k">:</span>{ <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Latest breaking news NZ<span class="pl-pds">"</span></span> },
         <span class="pl-s"><span class="pl-pds">"</span>browserWidth<span class="pl-pds">"</span></span><span class="pl-k">:</span>{<span class="pl-s"><span class="pl-pds">"</span>min<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">0</span>,<span class="pl-s"><span class="pl-pds">"</span>max<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-c1">500</span>}
   }
  },
  {
   <span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>homePage.js<span class="pl-pds">"</span></span>,
   <span class="pl-s"><span class="pl-pds">"</span>condition<span class="pl-pds">"</span></span><span class="pl-k">:</span>{
    <span class="pl-s"><span class="pl-pds">"</span>cssSelector<span class="pl-pds">"</span></span><span class="pl-k">:</span>{ <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>Latest breaking news NZ<span class="pl-pds">"</span></span> }
   }
    }
 ]
}</pre></div>

<p><code>url - The url to test</code></p>

<p><code>browser - browser to open (for windows change 'google chrome' to 'chrome')</code></p>

<p><code>report - ["cli"] : See results in command line.</code></p>

<p><code>file - visual spec file to load on a page. The visual spec file should be located in '/js/visualSpec/' folder</code></p>

<p><code>Condition - load the file based on conditions for a page.
    title (or any selector) and
    using screen size and
    devices (desktop/mobile) (coming soon)</code></p>

<h2>
<a id="writing-your-first-test" class="anchor" href="#writing-your-first-test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Writing your first test</h2>

<p>Create the following folder structure.</p>

<p>If you have downloaded the project, it should already have one.</p>

<pre><code>drishti
├── js
│   ├── lib
│   │   ├── drishti.js
│   ├── visualSpec
│   │   ├
│   │
</code></pre>

<p>Start writing the test files in the visualSpec folder.</p>

<p>Visual spec test files are written in .js files.</p>

<p>Edit the config.json file located in the structure to specify the rule to load the visual spec test files. Within drishtiSpecRules specify which test file to load on conditions.</p>

<pre><code>drishti
├── config.json
</code></pre>

<pre><code>"drishtiSpecRules":[
    {
      "file":"bbcMobileHome.js",
      "condition":{
        "browserWidth":{"min":0,"max":320}
      }
    },
    {
      "file":"bbcDesktopHome.js",
      "condition":{
        "cssSelector":{ "#page-title":"BBC Homepage" },
        "browserWidth":{"min":0,"max":2000}
      }
    }
]
</code></pre>

<h2>
<a id="running-drishti-tests" class="anchor" href="#running-drishti-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running Drishti tests</h2>

<p>Within drishti folder, run command <code>node server.js</code> or <code>npm start</code>.</p>

<p>This will start the drishti server and open the browser to test.
Navigate to different pages manually (or using drishti click method) to load new visual spec test files.</p>

<p>(See Video)</p>

<h2>
<a id="using-examples-to-get-you-started" class="anchor" href="#using-examples-to-get-you-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using examples to get you started</h2>

<ol>
<li>Copy the files from 'example/visualSpec/' folder under the 'js/visualSpec/' folder.</li>
<li>Edit the config.json file 'drishtiSpecRules' as shown above.</li>
<li>run <code>node server.js</code> or <code>npm start</code> to start test on bbc.com page</li>
</ol>

<h2>
<a id="drishti-test-results" class="anchor" href="#drishti-test-results" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drishti test results?</h2>

<p>Drishti results can be viewed in browser console directly. For continuous integration (CI) it provides command line reporting.
Drishti will highlight all the test failures in the browser directly in red. Highlighting all the CSS selectors that failed during the test.</p>

<h2>
<a id="how-to-write-a-visualspec-file" class="anchor" href="#how-to-write-a-visualspec-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to write a visualSpec file?</h2>

<p>visualSpec files accept the below methods and format. All methods must use {} notations.</p>

<p>(See examples folder for more).</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> drishtiSpec <span class="pl-k">=</span> {
  elementA <span class="pl-k">:</span> {
      <span class="pl-c">// Mandatory css selector value for element</span>
      selector <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>css Selector Value<span class="pl-pds">'</span></span>,

      <span class="pl-c">/* Relative Position methods*/</span>
      <span class="pl-c">// elementA is above elementB by 30px</span>
      above <span class="pl-k">:</span> {elementA <span class="pl-k">:</span> <span class="pl-c1">30</span> },

      <span class="pl-c">// elementA is below elementC by 40px</span>
      below <span class="pl-k">:</span> {elementC <span class="pl-k">:</span> <span class="pl-c1">40</span> },

      <span class="pl-c">// elementA is on left of elementD by 50px</span>
      leftOf <span class="pl-k">:</span> {elementD <span class="pl-k">:</span> <span class="pl-c1">50</span>},

      <span class="pl-c">// elementA is on right of elementE by 20px                           </span>
      rightOf <span class="pl-k">:</span>{elementE <span class="pl-k">:</span> <span class="pl-c1">20</span>},

      <span class="pl-c">// elementA is inside elementF with left 20px, right 20px, and top 10px, bottom 50 px</span>
      inside <span class="pl-k">:</span> {
          elementF<span class="pl-k">:</span> { left<span class="pl-k">:</span><span class="pl-c1">20</span>, right<span class="pl-k">:</span><span class="pl-c1">20</span>,top<span class="pl-k">:</span><span class="pl-c1">10</span>, bottom<span class="pl-k">:</span><span class="pl-c1">50</span> }
      },

      <span class="pl-c">// Accepts 4 values 'Top', 'Bottom', 'Left', 'Right'</span>
      aligned<span class="pl-k">:</span> {elementH<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>Top<span class="pl-pds">'</span></span>},

      <span class="pl-c">// elementA relative height to elementG</span>
      heightAs <span class="pl-k">:</span> {elementG <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>100%<span class="pl-pds">'</span></span> },

      <span class="pl-c">// elementA relative width to elementG                    </span>
      widthAs <span class="pl-k">:</span> {elementG <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>90%<span class="pl-pds">'</span></span> },

      <span class="pl-c">/* Element only methods*/</span>
      <span class="pl-c">// elementA width is 200 px</span>
      width <span class="pl-k">:</span> <span class="pl-c1">200</span>,

      <span class="pl-c">// elementA height is 100 px</span>
      height <span class="pl-k">:</span> <span class="pl-c1">100</span>,

      <span class="pl-c">// elementA text exact match</span>
      textIs <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>exact match<span class="pl-pds">'</span></span>,

      <span class="pl-c">// elementA substring text match</span>
      textContains <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>substring<span class="pl-pds">'</span></span>,

      <span class="pl-c">// elementA is visible on page? (boolean true or false)</span>
      visible <span class="pl-k">:</span> <span class="pl-c1">true</span>,

      <span class="pl-c">// elementA is absent on the page? (boolean true or false)</span>
      absent <span class="pl-k">:</span> <span class="pl-c1">false</span>,

      <span class="pl-c">// elementA is in screen-view? (boolean true or false)                              </span>
      inViewport <span class="pl-k">:</span> <span class="pl-c1">true</span>,

      <span class="pl-c">// elementA attribute 'href' has value 'http://www.abc.co.nz' (exact match)</span>
      attribute <span class="pl-k">:</span> {href <span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">'</span>http://www.abc.co.nz<span class="pl-pds">'</span></span>},

       <span class="pl-c">// elementA css property 'background-image' has 'header-title.png' (exact match)</span>
      cssContains <span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>background-image<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>header-title.png<span class="pl-pds">'</span></span>}

     <span class="pl-c">/* child Methods */</span>
     <span class="pl-c">// css value of child and number of times the child appears in the page</span>
     childItems <span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>.main_article<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-c1">5</span>},

     <span class="pl-c">// number of '&lt;li&gt;' within elementA</span>
     childList <span class="pl-k">:</span> <span class="pl-c1">6</span>,

     <span class="pl-c">// this can be repeat of all above methods (including childItems, childList &amp; child itself)</span>
     child <span class="pl-k">:</span> {}   

     <span class="pl-c">/* Action Methods */</span>
     <span class="pl-c">// Shows elementA is screen view. (performs page-up/down depending on the element location)</span>
     showInViewport <span class="pl-k">:</span> <span class="pl-c1">true</span>,

     <span class="pl-c">// Enters the text 'Random' for elementA if it is input type.</span>
     enterText <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Random<span class="pl-pds">'</span></span>,

     <span class="pl-c">// clicks on elementA</span>
     click <span class="pl-k">:</span> <span class="pl-c1">true</span>,

      <span class="pl-c">/* Page Scroll Actions */</span>
      <span class="pl-c">// Performs number of page downs</span>
      pageDown <span class="pl-k">:</span> <span class="pl-c1">1</span>,

      <span class="pl-c">// Performs number of page up</span>
      pageUp <span class="pl-k">:</span> <span class="pl-c1">1</span>,
  }  
}</pre></div>

<h2>
<a id="backstory" class="anchor" href="#backstory" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Backstory</h2>

<p>Drishti was built to test responsive design across multiple browsers and devices and using real browsers.
The idea and concept were influenced during technology labs working at stuff.co.nz</p>

<p>Drishti was tested on chrome and mac platform. It also works in firefox and safari and IE and mobile devices.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/rupeshmore/drishti/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/rupeshmore/drishti/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/rupeshmore/drishti"></a> is maintained by <a href="https://github.com/rupeshmore">rupeshmore</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-77503898-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
